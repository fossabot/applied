<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: atmosphere.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: atmosphere.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Atmospheric, thermodynamic, and aerodynamic
 * @author Jason Wohlgemuth
 * @module atmosphere
**/
define(function(require, exports, module) {
    'use strict';

    var _     = require('lodash');
    var delta = require('./math').delta;

    /**
     * @namespace Atmospheric Strata
     * @description Altitude ranges for each atmospheric strata (in km)
    **/
    var ATMOSPHERIC_STRATA = {/* eslint-disable no-magic-numbers */
        troposphere:  [0, 11],
        stratosphere: [11, 47],
        mesosphere:   [47, 86],
        thermosphere: [86, 500],
        exosphere:    [500, 10000]
    };/* eslint-enable no-magic-numbers */

    /**
     * @constant SPECIFIC_HEAT_RATIO Specific heat ratio at sea-level
    **/
    var SPECIFIC_HEAT_RATIO = 1.405;
    /**
     * @constant R Sea-level gas constant for air (J/kg*K)
    **/
    var R = 287;
    // var STANDARD_ATMOSPHERE_TABLE = {};// Derived from 1976 and 1962 US Standard Atmospheres
    var convert = {
        fpsToMach: convertFpsToMach
    };

    module.exports = {
        molecularWeight: molecularWeight,
        getStrata: getAtmosphericStrata,
        convert: convert
    };
    /**
     * @function getAtmosphericStrata
     * @param {number} altitude Altitude (in km)
     * @returns {string} The name of the strata that contains the altitude
    **/
    function getAtmosphericStrata(altitude) {
        return _(ATMOSPHERIC_STRATA).findKey(function(val) {
            return _.head(val) &lt;= altitude &amp;&amp; altitude &lt;= _.last(val);
        });
    }
    /**
     * @description Get molecular weight based on layer
     * @param {number} i Refers to the quantities at the base of the layer
     * @returns {number} molecular weight (in g/mole)
    **/
    function molecularWeight(i) {
        var MOLECULAR_WEIGHT_AT_SEA_LEVEL = 28.964;
        var M = [
            MOLECULAR_WEIGHT_AT_SEA_LEVEL,
            28.964,
            28.964,
            28.964,
            28.964,
            28.964,
            28.962,
            28.962,
            28.880,
            28.560,
            28.070,
            26.920,
            26.660,
            26.500,
            25.850,
            24.690,
            22.660,
            19.940,
            17.940,
            16.840,
            16.170,
            16.17
        ];
        return _(_.range(M.length)).includes(i) ? M[i] : MOLECULAR_WEIGHT_AT_SEA_LEVEL;
    }
    /**
     * @description Altitude with linear variation
     * @memberof module:atmosphere
     * @param {number} i Refers to the quantities at the base of the layer
     * @returns {number} altitude (in meters)
    **/
    function h(i) {
        var h = [
            0,
            11019.1,
            20063.1,
            32161.9,
            47350.0,
            51412.5,
            71802.0,
            86000.0,
            100000,
            110000,
            120000,
            150000,
            160000,
            170000,
            190000,
            230000,
            300000,
            400000,
            500000,
            600000,
            2000000
        ];
        return h[i];
    }
    function getLayerIndex(altitude) {
        var layers = _.range(21).map(h);
        return layers;
    }
    var layers = getLayerIndex();
    console.info(layers);
    /**
     * @description Temperature with linear variation
     * @memberof module:atmosphere
     * @param {number} i Refers to the quantities at the base of the layer
     * @returns {number} temperature (in K)
    **/
    function T(i) {

    }
    /**
     * @description Thermal lapse rate
     * @memberof module:atmosphere
     * @param {number} i Refers to the quantities at the base of the layer
     * @returns {number} rate (in K/km)
    **/
    function a(i) {

    }
    /**
     * @function calculateMolecularTemperature
     * @param {number} altitude
     * @param {number} i Refers to the quantities at the base of the layer
    **/
    function calculateMolecularTemperature(altitude, i) {
        return T(i) + (a(i) * (altitude - h(i)));
    }
    /**
     * @function calculateKineticTemperature
     * @param {number} altitude
     * @param {number} i Refers to the quantities at the base of the layer
    **/
    function calculateKineticTemperature(altitude, i) {
        var M = molecularWeight;
        var Mo = molecularWeight(0);
        var dM = delta(molecularWeight);
        var dh = delta(h);
        var Tm = calculateMolecularTemperature(altitude, i);
        var ratio = M(i) + ((dM(i + 1, i) * (altitude - h(i))) / dh(i + 1, i));
        return (ratio / Mo) * Tm;
    }
    /**
     * @description Calculate the speed of sound at a given temparature
     * @param {number} temperature Kinetic temperature
     * @returns {number} speed of sound (in m/s)
    **/
    function calculateSpeedOfSound(temperature) {
        var radicand = SPECIFIC_HEAT_RATIO * R * temperature;
        return Math.sqrt(radicand);
    }
    /**
     * @function convertFpsToMach
     * @param {number} speed Speed in feet/second
     * @param {number} altitude
     * @returns {number} Mach number
    **/
    function convertFpsToMach(speed, altitude) {
        var Tm = 0;
    }
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-atmosphere.html">atmosphere</a></li><li><a href="module-common.html">common</a></li><li><a href="module-geodetic.html">geodetic</a></li><li><a href="module-math.html">math</a></li><li><a href="module-polyfill.html">polyfill</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-atmosphere-Atmospheric%2520Strata.html">Atmospheric Strata</a></li><li><a href="module-geodetic-Geospatial%2520Formats.html">Geospatial Formats</a></li><li><a href="module-geodetic-WGS84%2520Datum.html">WGS84 Datum</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Feb 26 2017 14:08:50 GMT-0600 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
